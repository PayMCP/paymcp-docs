---
id: x402
title: "X402 Provider"
description: Accept on-chain x402 payments with PayMCP
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# X402 Provider

X402 is an on-chain payment protocol for MCP tools. With Mode.X402, your server returns an x402 payment request and the client replies with a payment signature that your server settles on-chain.

Use X402 only if you control the client or know it supports x402. Most major MCP clients do not support it yet.

## Requirements

- **Mode.X402** (x402 works only with the x402 provider)
- **payTo address** (where to receive funds)
- **Facilitator access** (default facilitator requires no keys; Coinbase CDP requires `apiKeyId` + `apiKeySecret`)

## Quick Setup

### 1. Configure the Provider

The minimal configuration requires a `payTo` entry. By default, payments are processed on Base mainnet (eip155:8453) using the public facilitator.

<Tabs>
<TabItem value="python" label="Python">

```python
from paymcp import PayMCP, Mode
from paymcp.providers import X402Provider

PayMCP(
    mcp,
    providers=[
        X402Provider(
            payTo=[{"address": "0xYourAddress"}])
    ],
    mode=Mode.X402
)
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript
import { installPayMCP, Mode } from 'paymcp';
import { X402Provider } from 'paymcp/providers';

installPayMCP(mcp, {
  providers: [
    new X402Provider({
        "payTo":[{"address": "0xAddress"}]
    })
  ],
  mode: Mode.X402
});
```

</TabItem>
</Tabs>

### 2. Choose a Network

Supported networks:
- Base mainnet: `eip155:8453` (default)
- Base sepolia: `eip155:84532`
- Solana devnet: `solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1`
- Solana mainnet: `solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp`

Add a network to `payTo` when needed:

```python
X402Provider(
    payTo=[{"address": "0xYourAddress", "network": "eip155:84532"}]
)
```

### 3. Facilitator Credentials

- **Default facilitator** is `https://facilitator.paymcp.info` and requires no API keys.
- **Coinbase CDP facilitator** requires `apiKeyId` + `apiKeySecret`.
```python
X402Provider(
    payTo=[{"address": "0xYourAddress"}],
    facilitator={
        "url": "https://api.cdp.coinbase.com/platform/v2/x402",
        "apiKeyId": "cdp_key_id",
        "apiKeySecret": "cdp_secret"
    }
)
```
- **Changing facilitators** is done via `facilitator.url`.
```python
X402Provider(
    payTo=[{"address": "0xYourAddress"}],
    facilitator={"url": "https://www.x402.org/facilitator"}
)
```


## Client Integration Notes

- The payment signature can be provided in headers: `payment-signature` or `x-payment`.
- MCP clients may place it in `_meta["x402/payment"]` (per the x402 MCP transport spec).

## Mode.AUTO With Two Providers

You can configure X402 alongside a traditional provider. In Mode.AUTO, PayMCP will prefer X402 when the client supports it, otherwise it falls back to the usual elicitation/resubmit flow with traditional provider.

```python
PayMCP(
    mcp,
    providers={
        "x402": X402Provider(payTo=[{"address": "0xYourAddress"}]),
        "stripe": StripeProvider(apiKey="sk_test_...")
    },
    mode=Mode.AUTO
)
```

## References

- x402 protocol: https://www.x402.org
